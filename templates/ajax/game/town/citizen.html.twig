{% extends "ajax/game/town/town.html.twig" %}
{% block content %}

    <div class="row-table citizens-list">
        {% for citizen in citizens %}
            {# @var \App\Entity\Citizen citizen  #}
            <div class="row pointer" x-ajax-href="{{ path('town_visit', {id: citizen.id}) }}">
                <div class="padded cell rw-1 rw-md-2">
                    {% if citizen.alive %}
                        <img alt="{{ citizen.home.prototype.level }}" src="{{ asset('build/images/home/' ~ citizen.home.prototype.icon ~ '.gif') }}" />
                    {% elseif citizen.home.holdsBody %}
                        <img alt="{{ 'Leiche nicht beseitigt!'|trans({},'game') }}" src="{{ asset('build/images/small_warning.gif') }}" />
                    {% endif %}
                </div>
                <div class="padded cell rw-3 rw-md-5 small">
                    <span>
                        {% if citizen.alive %}
                            {% if citizen.banished %}
                                <img alt="" src="{{ asset('build/images/banished.gif') }}" />
                            {% elseif citizen.profession.heroic %}
                                <img alt="" src="{{ asset('build/images/professions/hero.gif') }}" />
                            {% else %}
                                <img alt="" src="{{ asset('build/images/professions/void.gif') }}" />
                            {% endif %}
                            <img alt="{{ citizen.profession.label|trans({},'game') }}" src="{{ asset('build/images/professions/' ~ citizen.profession.icon ~ '.gif') }}" />
                        {% else %}
                            <img alt="" src="{{ asset('build/images/professions/void.gif') }}" />
                            <img alt="{{ 'Tot!'|trans({},'game') }}" src="{{ asset('build/images/professions/death.gif') }}" />
                        {% endif %}
                        <b>{{ citizen.user.username }}</b>
                    </span>
                </div>
                <div class="padded cell rw-3 small hide-md hide-sm">
                    {{ citizen.home.description }}
                </div>
                <div class="padded cell rw-3 rw-md-5 small">
                    {% if not hidden[citizen.id] %}
                        {% for item in citizen.home.chest.items %}
                            {# @var \App\Entity\Item item #}
                            <img alt="{{ item.prototype.label|trans({},'items') }}" src="{{ asset('build/images/item/item_' ~ item.prototype.icon ~ '.gif') }}" />
                        {% endfor %}
                    {% else %}
                        <em>{{ 'leere Truhe'|trans({},'game') }}</em>
                    {% endif %}
                </div>
                <div class="padded cell rw-2 small hide-md hide-sm right ">
                    {% if citizen.alive %}
                        {% if not citizen.zone %}
                            {{ "In der Stadt"|trans({},'game') }}
                        {% elseif (citizen.zone.x == 0) and (citizen.zone.y == 0) %}
                            {{ "Am Stadttor"|trans({},'game') }}
                        {% else %}
                            [{{ citizen.zone.x }}|{{ citizen.zone.y }}]
                        {% endif %}
                    {% else %}
                        {{ citizen.causeOfDeath.label }}
                    {% endif %}
                </div>
                <div class="padded cell rw-12 small hide-desktop hide-lg">
                    {{ citizen.home.description }}
                </div>
            </div>
        {% endfor %}
    </div>

{% endblock %}
{% block js %}
    {{ parent() }}
    <script>
    </script>
{% endblock %}