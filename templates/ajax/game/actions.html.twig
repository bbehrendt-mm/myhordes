{% if scout is not defined %}
    {% set scout = false %}
{% endif %}
{% if list|length > 0 or recipes.recipes|length > 0  %}
    <ul class="actions">
        {% for entry in list %}
            <li class="action" {% if entry.crossed %}disabled{% elseif entry.targets is null %}x-action-id="{{ entry.action.id }}" x-provoking-id="{{ entry.item.id }}"{% else %}x-target-definition="{{ entry.action.id }}-{{ entry.item.id }}"{% endif %}>
                <img src="{{ asset('build/images/item/item_' ~ entry.item.prototype.icon ~ '.gif') }}" alt="{{ entry.item.prototype.label|trans({},'items') }}">
                {% if scout and not entry.action.keepsCover %}
                    <img class="float-right" src="{{ asset('build/images/uncloak.gif') }}" alt="">
                {% endif %}
                <span>{{ entry.action.label|trans({},'items') }}: <b>{{ entry.item.prototype.label|trans({},'items') }}</b></span>
                {% if entry.targets is not null and not entry.crossed %}
                    <div class="targets" x-target-selection-for="{{ entry.action.id }}-{{ entry.item.id }}">
                        {% if entry.targets|length > 0 %}
                            <span>{{ 'Bitte wähle einen Gegenstand:'|trans({},'game') }}</span>
                            <ul>
                                {% for item in entry.targets %}
                                    {# @var item \App\Entity\Item #}
                                    <li x-action-id="{{ entry.action.id }}" x-provoking-id="{{ entry.item.id }}" x-target-id="{{ item.id }}" ><img src="{{ asset('build/images/item/item_' ~ item.prototype.icon ~ '.gif') }}" alt="{{ item.prototype.label|trans({},'items') }}"></li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <span>{{ 'Du verfügst über keine geeigneten Gegenstände'|trans({},'game') }}</span>
                        {% endif %}
                        <div class="right"><span x-close-for="{{ entry.action.id }}-{{ entry.item.id }}">{{ 'Schließen'|trans({},'global') }}</span></div>
                    </div>
                {% endif %}
            </li>
        {% endfor %}
        {% for recipe in recipes.recipes %}
            <li class="action" x-recipe-id="{{ recipe.id }}">
                {# @var recipe \App\Entity\Recipe #}
                {% if recipe.result.entries.count == 1 %}
                    <img src="{{ asset('build/images/item/item_' ~ recipe.result.entries[0].prototype.icon ~ '.gif') }}" alt="{{ recipe.result.entries[0].prototype.label|trans({},'items') }}">
                    {% if scout %}
                        <img class="float-right" src="{{ asset('build/images/uncloak.gif') }}" alt="">
                    {% endif %}
                    <span>{{ 'Herstellen'|trans({},'game') }}: <b>{{ recipe.result.entries[0].prototype.label|trans({},'items') }}</b></span>
                    {% if recipe.source %}
                        <span>
                            {{ 'aus'|trans({},'game') }}:
                            {% for entry in recipe.source.entries %}
                                {# @var entry \App\Entity\ItemGroupEntry #}
                                {% for n in 1..entry.chance %}
                                    <img class="{% if n > recipes.source_items[entry.prototype.id] %}unavailable{% endif %}" src="{{ asset('build/images/item/item_' ~ entry.prototype.icon ~ '.gif') }}" alt="{{ entry.prototype.label|trans({},'items') }}">
                                {% endfor %}
                            {% endfor %}
                        </span>
                    {% endif %}
                {% else %}
                    {% if recipe.source %}
                        {% if scout %}
                            <img class="float-right" src="{{ asset('build/images/uncloak.gif') }}" alt="">
                        {% endif %}
                        <span>
                            {{ 'Kombinieren'|trans({},'game') }}:
                            {% for entry in recipe.source.entries %}
                                {# @var entry \App\Entity\ItemGroupEntry #}
                                {% for n in 1..entry.chance %}
                                    <img class="{% if n > recipes.source_items[entry.prototype.id] %}unavailable{% endif %}" src="{{ asset('build/images/item/item_' ~ entry.prototype.icon ~ '.gif') }}" alt="{{ entry.prototype.label|trans({},'items') }}">
                                {% endfor %}
                            {% endfor %}
                        </span>
                    {% endif %}
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endif %}
