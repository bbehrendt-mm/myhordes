{% extends "ajax/game/game.html.twig" %}
{% block ajax %}
    {{ parent() }}
    <div class="row">
        <div class="padded-small cell rw-4 rw-lg-6 rw-md-12">
            {% embed "ajax/game/map.html.twig" with {
                'default_zoom': 1,
                'default_show_zone': true,
                'allow_zone_view': true,
                'move': allow_movement,
                'in_town': false
            } %}{% endembed %}
            <div class="zone-info">
                {% if scout_level is not null %}
                <div class="row zone-scout">
                    <div class="padded cell rw-12">
                        {% if scout_level == 0 %}
                            <img alt="" src="{{ asset('build/images/scout_lv0.gif') }}" /><span class="warning">&nbsp;{{ 'Kaum erforschte Zone'|trans({},'game') }}</span>
                        {% elseif scout_level == 1 %}
                            <img alt="" src="{{ asset('build/images/scout_lv1.gif') }}" /><span>&nbsp;{{ 'Die Zone wurde teilweise erforscht'|trans({},'game') }}</span>
                        {% elseif scrout_level == 2 %}
                            <img alt="" src="{{ asset('build/images/scout_lv2.gif') }}" /><span>&nbsp;{{ 'Die Zone wurde erforscht'|trans({},'game') }}</span>
                        {% else %}
                            <img alt="" src="{{ asset('build/images/scout_lv3.gif') }}" /><span>&nbsp;{{ 'Die Zone wurde voll und ganz erforscht und kartographiert'|trans({},'game') }}</span>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                <div class="row zone-cp">
                    <div class="padded cell rw-6 left"><img src="{{ asset('build/images/small_human.gif') }}" alt="CP" /> <span>{{ zone_cp }} {% trans from 'game' %}Punkt(e){% endtrans %}</span></div>
                    <div class="padded cell rw-6 right"><span>{{ zone_zombies }} {% trans from 'game' %}Punkt(e){% endtrans %}</span> <img src="{{ asset('build/images/small_zombie.gif') }}" alt="ZP" /></div>
                </div>
                <div class="row zone-dist">
                    <div class="padded cell rw-12 center">
                        {{ 'Stadt in %km% Entfernung'|trans({'%km%': '<b>' ~ km ~ 'km</b>'},'game')|raw }}&nbsp;&nbsp;(<div class="ap">{{ zone.x|abs + zone.y|abs }}</div>)
                    </div>
                </div>
            </div>
        </div>
        <div class="padded cell rw-8 rw-lg-6 rw-md-12">
            {% block content %}
            {% endblock %}
        </div>
    </div>
{% endblock %}
{% block js %}
    {{ parent() }}
    <script>
        {% embed "scripts/map.js.twig" %}{% endembed %}

        let map = document.querySelector('.map_area');
        map.addEventListener('zone-click', function(e) {
            mark_zone(map,e.detail.x,e.detail.y,true);
        });
    </script>
{% endblock %}